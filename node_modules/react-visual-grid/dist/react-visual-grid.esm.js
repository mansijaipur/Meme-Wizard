import{jsx as e,jsxs as t,Fragment as o}from"react/jsx-runtime";import r from"classnames";import{nanoid as n}from"nanoid";import i,{useRef as l,useCallback as s,useEffect as c,useState as a,useMemo as d,createContext as h,forwardRef as u,useContext as g,useImperativeHandle as m}from"react";import{useDebouncedCallback as p}from"use-debounce";import{createPortal as v}from"react-dom";const w=e=>"string"==typeof e&&e.includes("%"),_=e=>Number(e.replace("%","")),f={"1X":{height:100,width:120},"2X":{height:180,width:200},"3X":{height:280,width:320}},y={backgroundColor:"#000",controlBgColor:"#303030",controlBtnColor:"#595959",controlsBackDropColor:"rgba(0, 0, 0, 0.95)",primaryColor:"#007fff",thumbnailBgColor:"#202020"},x={backgroundColor:"#fff",controlBgColor:"#cdcdcd",controlBtnColor:"#595959",controlsBackDropColor:"rgba(255, 255, 255, 0.95)",primaryColor:"#007fff",thumbnailBgColor:"#eee"};const b=({mode:e,imageSizes:t=f,gridDimensions:o={columns:4},width:r=0,height:n=0,gridLayout:i,gap:h=10,totalImages:u=0,theme:g,dragRef:m})=>{const[v,w]=a(0),[_,b]=a(0),[L,k]=a("2X"),C=l(null),[T,M]=a(!1),[R,B]=a({height:n,width:r}),[z,N]=a({height:n,width:r}),[$,W]=a({height:t[L].height,width:t[L].width}),[S,D]=a(!1),[E,I]=a(null),[H,P]=a(g);!function(e,t){c((()=>{if(t&&e){const{backgroundColor:o,thumbnailBgColor:r,controlBgColor:n,controlBtnColor:i,controlsBackDropColor:l,primaryColor:s}=t,c={"--rcvg-bg-color":o,"--rcvg-control-btn-color":i,"--rcvg-controls-backdrop-color":l,"--rcvg-controls-bg-color":n,"--rcvg-primary-color":s,"--rcvg-thumbnail-bg-color":r};e.style.cssText+=Object.keys(c).map((e=>`${e}: ${c[e]};`)).join("")}}),[t,e])}(C.current,H),function({target:e,onResizeEnded:t,onResizeStarted:o,minWidth:r=300,minHeight:n=300,dragRef:i}){const a=l(!1),d=l(null),h=l(),u=l({height:0,width:0}),g=l(!1),m=s((e=>{e.preventDefault(),e.stopPropagation(),a.current=!0}),[]),p=s((e=>{e.preventDefault(),a.current=!1,g.current&&(null==t||t(u.current),g.current=!1)}),[]);c((()=>{e&&(d.current=e,h.current=e.getBoundingClientRect(),document.addEventListener("pointerup",p))}),[e]),c((()=>{i&&i.addEventListener("pointerdown",m)}),[i]);const v=s((e=>{e.preventDefault(),e.stopPropagation();const{clientX:t,clientY:i}=e;if(a.current&&h.current){const{right:e,bottom:l,width:s,height:c,left:a,top:m}=h.current,p=s-(e-t),v=c-(l-i);if(g.current||(null==o||o(),g.current=!0),d.current&&p>r&&v>n){const e=d.current;e.style.width=`${p}px`,e.style.height=`${v}px`,e.style.cssText+=`\n          --rc-gallery-left: ${a}px;\n          --rc-gallery-top: ${m}px;`,u.current={height:v,width:p}}}}),[]);c((()=>(window.addEventListener("pointermove",v),()=>{if(window.removeEventListener("pointermove",v),d.current){const e=d.current;e.removeEventListener("pointerdown",m),e.removeEventListener("pointerup",p)}i&&i.removeEventListener("pointerdown",m)})),[])}({dragRef:m,onResizeEnded:e=>{I(!1);const{height:t,width:o}=e;M(!1),t&&o&&(N({height:t,width:o}),B({height:t,width:o}))},onResizeStarted:()=>{I(!0),M(!0),j({regionBottom:-1,regionTop:-1})},target:C.current});const{scrollPositions:A,region:O={regionBottom:0,regionTop:0},setRegion:j,isScrolled:G,startReached:X,endReached:U,scrollPercent:Z,scrollToTop:F,scrollToBottom:Y}=function({ref:e,imageDimensions:t,gridLayout:o,resizeStarted:r,fullScreen:n,zoomLevel:i}){const[d,h]=a({scrollLeft:0,scrollTop:0}),[u,g]=a({regionBottom:0,regionTop:0}),[m,v]=a(!1),w=l(),[_,f]=a(!1),[y,x]=a(!0),[b,L]=a(0),k=s((e=>{const t=e.target,{scrollLeft:o,scrollTop:r}=t;w.current&&clearInterval(w.current),w.current=window.setInterval((()=>{t.scrollLeft===o&&t.scrollTop===r&&(v(!1),clearInterval(w.current))}),500),v(!0)}),[]),C=s((()=>{e.current&&e.current.scrollTo(0,0)}),[]),T=s((()=>{const t=e.current;if(t){const{scrollHeight:e,scrollWidth:r}=t,n="horizontal"===o?r:0;t.scrollTo(n,e)}}),[o]),M=p((e=>{const n=e.target,{height:i,width:l}=t,{scrollLeft:s,scrollTop:c,clientHeight:a,clientWidth:d,scrollHeight:u,scrollWidth:m}=n;if(h({scrollLeft:s,scrollTop:c}),r)return;f&&f(!1),"vertical"===o?(L((c+a)/u),c+a>=u&&(f(!0),x(!1)),x(0===c)):"horizontal"===o&&(L((s+d)/m),s+d>d&&(f(!0),x(!1)),x(0===s));const p="vertical"===o?c/i:s/l,v="vertical"===o?(c+a)/i:(s+d)/l;g({regionBottom:Math.ceil(v),regionTop:Math.floor(p)})}),50);return c((()=>(e.current&&(e.current.addEventListener("scroll",M),e.current.addEventListener("scroll",k)),()=>{e.current&&(e.current.removeEventListener("scroll",M),e.current.removeEventListener("scroll",k))})),[e]),c((()=>{var t;null===(t=e.current)||void 0===t||t.scrollTo(0,0),L(0)}),[r]),c((()=>{setTimeout((()=>{var t;null===(t=e.current)||void 0===t||t.scrollTo(0,0),h({scrollLeft:0,scrollTop:0}),L(0)}),100)}),[n,i]),{endReached:_,isScrolled:m,region:u,scrollPercent:b,scrollPositions:d,scrollToBottom:T,scrollToTop:C,setRegion:g,startReached:y}}({fullScreen:S,gridLayout:i,imageDimensions:$,ref:C,resizeStarted:T,zoomLevel:L}),{wrapperStyle:q,galleryStyle:V}=function({rootDimensions:e,imageDimensions:t,gridLayout:o,region:r,columns:n,rows:i,gap:l,mode:s,isFullScreen:c,isResized:a}){const h=d((()=>{const{width:e,height:r}=t,c=e-l;return"auto"===s?"vertical"===o?{gridTemplateColumns:`repeat(${n}, ${c-1*l}px)`}:{gridAutoFlow:"column",gridTemplateColumns:`repeat(${n}, ${c}px)`,gridTemplateRows:`repeat(${i}, ${r-l}px)`}:{gridTemplateColumns:`repeat(${n}, ${c}px)`}}),[s,n,t.width,i,t.height]),u=d((()=>{let e={};const{height:n,width:i}=t,{regionTop:s}=r;return e="vertical"===o?{gridAutoRows:n-l+"px",top:Math.max(s*n,20)+"px"}:{gridAutoColumns:i-l+"px",left:Math.max(s*i,20)+"px"},{...h,...e,gap:`${l}px`}}),[n,h,r.regionTop,o,t.width,t.height]),g=d((()=>{let t={};const{width:r,height:n}=e;return"auto"===s&&(t={height:`${n}px`,width:`${r}px`}),c&&(t={...t,left:0,position:"fixed",top:0}),t=a?{...t,left:0,position:"absolute",top:0}:{...t},{...t,["overflow"+("vertical"===o?"Y":"X")]:"auto"}}),[e.width,e.height,o,s,c,a]);return{galleryStyle:u,wrapperStyle:g}}({columns:v,gap:h,gridLayout:i,imageDimensions:$,isFullScreen:S,isResized:T,mode:e,region:O,rootDimensions:z,rows:_}),J=()=>{const t=C.current,{width:o,height:r}=$,{width:n,height:l}=z;if(t&&"auto"===e&&n&&l){const e=Math.floor(n/o),t=Math.floor((l-120)/r);"vertical"===i?(w(e),b(Math.round(u/e)),j((e=>({...e,regionBottom:Math.round(l/r)})))):"horizontal"===i&&(b(t),w(Math.round(n/o)),j((e=>({...e,regionBottom:Math.round(n/o)}))))}};c((()=>{const{width:e,height:t}=z;e&&t&&(I(!0),setTimeout((()=>{J(),I(!1)}),250))}),[z.width,z.height,$.width,$.height]);const K=s((e=>{C.current=e,J()}),[]),Q=s((()=>{C.current&&(C.current.scrollTo(0,0),j({regionBottom:-1,regionTop:-1}))}),[]),ee=s((()=>{"#000"===(null==H?void 0:H.backgroundColor)?P(x):P(y)}),[null==H?void 0:H.backgroundColor]);c((()=>{C.current&&Q()}),[L]);c((()=>{if(C.current){const{height:e,width:o}=$;if("vertical"===i){const o=_*e,r=Math.max(...Object.keys(t).map((e=>t[e].height)));B({height:o+r})}else{const e=Math.round(u/_)*o;B({width:e})}}}),[_,v,$.width,$.height]);const te=d((()=>"#000"===(null==H?void 0:H.backgroundColor)),[null==H?void 0:H.backgroundColor]);return{activeZoomLevel:L,columns:v,containerDimensions:R,endReached:U,fullScreen:()=>{if(Q(),C.current)if(S)D(!1),N({height:n,width:r}),B({height:n,width:r}),document.body.style.overflow="auto";else{const{innerHeight:e,innerWidth:t}=window;D(!0),N({height:e,width:t}),B({height:e,width:t}),document.body.style.overflow="hidden"}},hideImages:E,isDark:te,isFullScreen:S,isResized:T,isScrolled:G,onRef:K,resizeImages:e=>{if(e!==L){const{width:o,height:r}=t[e];I(!0),k(e),W({height:r,width:o})}},rootDimensions:z,rows:_,scrollPercent:Z,scrollPositions:A,scrollToBottom:Y,scrollToTop:F,startReached:X,style:V,toggleTheme:ee,windowRegion:O,wrapperStyle:q}},L={display:{height:0,width:0},enableResize:!0,gap:20,gridDimensions:{columns:3},gridLayout:"vertical",height:600,imageSizes:f,images:[],mode:"auto",showProgressBar:!0,theme:y,width:1200},k=h(L),C=()=>e("svg",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24",children:e("path",{d:"M10.29 3.86 1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0zM12 9v4M12 17h.01"})}),T=()=>e("svg",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e("path",{d:"m7 13 5 5 5-5M7 6l5 5 5-5"})}),M=()=>e("svg",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24",children:e("path",{d:"m15 18-6-6 6-6"})}),R=()=>e("svg",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24",children:e("path",{d:"m9 18 6-6-6-6"})}),B=()=>e("svg",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24",children:e("path",{d:"m17 11-5-5-5 5M17 18l-5-5-5 5"})}),z=()=>e("svg",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24",children:e("path",{d:"M18 6 6 18M6 6l12 12"})}),N=()=>e("svg",{className:"feather feather-minimize",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e("path",{d:"M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"})}),$=()=>e("svg",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e("path",{d:"M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"})}),W=()=>e("svg",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24",children:e("path",{d:"M15 3h6v6M9 21H3v-6M21 3l-7 7M3 21l7-7"})}),S=()=>e("svg",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),D=()=>t("svg",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[e("circle",{cx:12,cy:12,r:5}),e("path",{d:"M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"})]});var E="progress-bar-module_container__KLBiq",I="progress-bar-module_progress_bar__CSAlN";const H=({percent:t,top:o=0,containerWidth:r=0,left:n=0})=>{const i=l(null),c=s((e=>{e&&(i.current=e)}),[]),a=d((()=>{const e=i.current;if(e){const o=r||e.clientWidth;return{"--rc-images-width":`${Math.round(o*t)}px`,left:`${n}px`,width:`${o}px`}}}),[t,i.current,n]);return e("div",{className:E,ref:c,style:a,children:e("span",{className:I})})};var P={control_button:"controls-module_control_button__tYlmB",controls:"controls-module_controls__6Iaok",hide:"controls-module_hide__7r5Tj",control:"controls-module_control__OT-ZG",active:"controls-module_active__L7-YG",rounded:"controls-module_rounded__1qjCQ",controls_wrapper:"controls-module_controls_wrapper__qSfUz",button_disabled:"controls-module_button_disabled__W-ZaT",resize_btn:"controls-module_resize_btn__Bac1c"};const A=({onAction:t,endReached:o,startReached:n,label:i,type:l,children:s,actionType:c,active:a})=>{const h=d((()=>r(P.control_button,P.rounded)),[]),u=d((()=>r("control"===l?h:"",P.nav_button,o&&"GO_DOWN"===c?P.button_disabled:"",n&&"GO_UP"===c?P.button_disabled:"",a?P.active:"")),[o,n,a]);return e("button",{"aria-label":i,className:u,onClick:()=>t(c),title:i,children:s})},O=u((({onAction:o,activeZoom:n,isScrolled:i,hide:c,scrollPositions:a,rootHeight:h=0,rootWidth:u=0,containerWidth:p,containerHeight:v,isFullScreen:w,scrollPercent:_,endReached:f,startReached:y,isDark:x},b)=>{const{gridLayout:L,showProgressBar:C,enableResize:M}=g(k),R=l(null),z=d((()=>r(P.controls_wrapper,c?P.hide:"")),[c]),E=s((e=>{e&&(R.current=e)}),[]),I=l(null);m(b,(()=>I.current));const O=d((()=>{if(R.current){const{scrollLeft:e,scrollTop:t}=a,o=R.current,{clientHeight:r,clientWidth:n}=o;let i={["vertical"===L?"top":"left"]:"horizontal"===L?(e+u)/2-n/2+"px":t+h-r+"px"};return e?i={left:e+u/2-n/2+"px"}:t&&(i={top:t+h-r+"px"}),i}return{}}),[null==a?void 0:a.scrollTop,null==a?void 0:a.scrollLeft,h,u,R.current]),j=d((()=>"horizontal"===L?{width:p}:O),[L,p,O]),G=d((()=>"horizontal"===L?O:{}),[L,O]);return t("div",{className:z,ref:"vertical"===L?E:null,style:j,children:[t("ul",{className:r(P.controls,c?P.hide:""),ref:"horizontal"===L?E:null,style:G,children:[e("li",{className:P.control,children:e(A,{actionType:"GO_UP",label:"Go Up",onAction:()=>o("GO_UP"),startReached:y,type:"control",children:e(B,{})})}),["1X","2X","3X"].map(((t,r)=>e("li",{className:P.control,children:e(A,{actionType:t,active:n===t,label:t,onAction:o,type:"control",children:t})},r))),e("li",{className:P.control,children:e(A,{actionType:"GO_DOWN",endReached:f,label:"Go Down",onAction:o,type:"control",children:e(T,{})})}),e("li",{className:r(P.control,P.nav_button),children:e(A,{actionType:"FULL_SCREEN",label:w?"Minimize":"Maximize",onAction:o,type:"control",children:e(w?N:$,{})})}),e("li",{className:r(P.control,P.nav_button),children:e(A,{actionType:"TOGGLE_THEME",label:x?"white":"dark",onAction:o,type:"control",children:e(x?D:S,{})})})]}),C?e(H,{containerWidth:u,left:a.scrollLeft,percent:_||0,top:a.scrollTop}):null,M&&!w?e("span",{"aria-label":"resize",className:P.resize_btn,ref:I,role:"button",children:e(W,{})}):null]})}));O.displayName="Controls";var j="image-module_image__y02P7",G="image-module_wrapper__VIg-d",X="image-module_visible__RuTCZ",U="image-module_hidden__UwN8S",Z="image-module_icon__-6IV2";const F=i.memo((({src:o,alt:n,width:i=100,height:l=100,onClick:c,index:h,id:u})=>{const[g,m]=a(!1),[p,v]=a(!1),w=d((()=>r(j,g?X:U)),[g]),_=s(((e,t)=>{if(p)return;const{x:o,y:r}=e.target.getBoundingClientRect();e instanceof KeyboardEvent?"Enter"===e.key&&(null==c||c(t,u,{x:o,y:r})):null==c||c(t,u,{x:o,y:r})}),[p]);return t("div",{className:G,onClick:e=>_(e,o),onKeyUp:e=>_(e,o),role:"button",style:{height:l,width:i},tabIndex:0,children:[p&&e("span",{className:Z,children:e(C,{})}),!p&&e("img",{alt:n,className:w,onError:()=>v(!0),onLoad:()=>m(!0),src:o})]})}),((e,t)=>e.index===t.index));F.displayName="Image";var Y="screen-module_screen__DxQmm",q="screen-module_hide__Fqgfs",V="screen-module_show__KaYDu";const J=({show:t=!1,width:o=0,height:n=0})=>{const i=d((()=>r(Y,null!==t?t?V:q:"")),[t]),l=d((()=>({height:`${n}px`,width:`${o}px`})),[o,n]);return e("div",{className:i,style:l})};var K="viewer-module_container__y9rG5",Q="viewer-module_viewer__q8To-",ee="viewer-module_close_btn__KxhRJ",te="viewer-module_nav_button__GMUZY",oe="viewer-module_image__c6JfO",re="viewer-module_show__Q-yAU",ne="viewer-module_hide__PrOWJ";const ie=i.memo((({url:o,dimensions:{height:n,width:i},rect:{x:h,y:u},onClose:g,top:m=0,left:p=0,onNext:v,onPrevious:w,activeImageIndex:_,totalImages:f})=>{const y=d((()=>({height:`${n}px`,left:`${p}px`,top:`${m}px`,width:`${i}px`})),[n,i,h,u]),x=l(!0),[b,L]=a(!1);c((()=>{x.current=!1,setTimeout((()=>{L(!0)}),100)}),[]);const k=d((()=>r(oe,x.current?"":b?re:ne)),[b]),{onRef:C}=function({escCB:e,leftCB:t,rightCB:o}){const r=l(null),n=s((r=>{const{key:n}=r;"Escape"===n?null==e||e():"ArrowRight"===n?null==o||o():"ArrowLeft"===n&&(null==t||t())}),[]),i=s((e=>{e&&(r.current=e,e.focus(),e.addEventListener("keyup",n))}),[]);return c((()=>()=>{r.current&&r.current.removeEventListener("keyup",n)}),[]),{onRef:i}}({escCB:g,leftCB:w,rightCB:v});return t("div",{className:K,ref:C,role:"dialog",style:y,tabIndex:0,children:[e("button",{"aria-label":"close",className:ee,onClick:g,children:e(z,{})}),t("div",{className:Q,children:[e("button",{className:r(te,1===_?ne:""),onClick:w,children:e(M,{})}),e("img",{alt:"",className:k,src:o}),e("button",{className:r(te,_===f-1?ne:""),onClick:v,children:e(R,{})})]})]})}),((e,t)=>e.url===t.url&&e.dimensions.height===t.dimensions.height&&e.dimensions.width===t.dimensions.width&&e.top===t.top&&e.left===t.left));ie.displayName="Viewer";const le=t=>t.show&&t.node?v(e(o,{children:e(ie,{...t,onClose:t.onClose})}),t.node):null;var se={gallery_item:"grid-module_gallery_item__dR1vN",wrapper:"grid-module_wrapper__wXYr9",horizontal:"grid-module_horizontal__XJwyW",vertical:"grid-module_vertical__Dk7Cw",resized:"grid-module_resized__BM2MT",gallery:"grid-module_gallery__x2b9j",hide:"grid-module_hide__ZhIvX",container:"grid-module_container__qJ1mC"};const ce=o=>{const i=Object.assign({},L,o),h=l(null),{images:u=[],width:g=1200,height:m=600,gridLayout:p="vertical",gridDimensions:v={columns:3},gap:x=20,mode:C="auto",imageSizes:T=f,theme:M,enableResize:R,enableDarkMode:B=!1}=i,z=l(u.map((e=>({...e,id:n()})))),[N]=a((()=>{if(w(g)&&w(m)){const{innerHeight:e,innerWidth:t}=window,o=_(g),r=_(m);return{height:Math.round(e*(r/100)),width:Math.round(t*(o/100))}}return{height:+m,width:+g}})),{activeZoomLevel:$,columns:W,containerDimensions:{height:S,width:D},fullScreen:E,hideImages:I,onRef:H,resizeImages:P,rows:A,style:j,windowRegion:{regionTop:G,regionBottom:X},wrapperStyle:U,scrollPositions:Z,isScrolled:Y,isFullScreen:q,scrollPercent:V,scrollToTop:K,scrollToBottom:Q,endReached:ee,startReached:te,rootDimensions:{height:oe,width:re},isResized:ne,toggleTheme:ie,isDark:ce}=b({dragRef:h.current,enableResize:R,gap:x,gridDimensions:v,gridLayout:p,height:N.height,imageSizes:T,mode:C,theme:B?y:M,totalImages:u.length,width:N.width}),ae=d((()=>"vertical"===p?z.current.filter(((e,t)=>Math.floor(t/W)>=G&&Math.floor(t/W)<=X)):z.current.filter(((e,t)=>t>=G*A&&t<=A*X-1))),[G,X,A,W]),de=l(null),[he,ue]=a(""),[ge,me]=a(!1),[pe,ve]=a({x:0,y:0}),[we,_e]=a(-1),fe=s((e=>{e&&(de.current=e)}),[]),ye=d((()=>r(se.gallery,se[p])),[p,I,ne]),xe=d((()=>r("vertical"===p?se.vertical:se.horizontal,se.wrapper,ne?se.resized:"")),[p,ne]),be=d((()=>({height:T[$].height-x,width:T[$].width-x})),[$]),Le=d((()=>({rootHeight:oe,rootWidth:re})),[q,oe,re]),ke=d((()=>({height:`${S}px`,width:`${D}px`})),[D,S]),Ce=(e,t,o)=>{const r=z.current.findIndex((e=>e.id===t));me(!0),_e(r||0),o&&ve(o)},Te=s((()=>{we>0&&_e((e=>e-1))}),[we]),Me=s((()=>{we<u.length-1&&_e((e=>e+1))}),[we]);c((()=>{we>-1&&ue(u[we].src)}),[we]);const Re=d((()=>Object.assign({},U,ge?{overflow:"hidden"}:{})),[ge,U]),Be=d((()=>e("ul",{className:ye,style:j,children:ae.map(((t,o)=>e("li",{className:se.gallery_item,children:e(F,{alt:t.alt,height:be.height,id:t.id,index:o,onClick:Ce,src:t.src,width:be.width})},t.id)))})),[ae.length,G,X]);return e(k.Provider,{value:i,children:e("div",{style:{height:Le.rootHeight,position:"relative",width:Le.rootWidth},children:t("div",{className:xe,ref:H,style:Re,children:[t("div",{className:se.container,ref:fe,style:ke,children:[e(J,{height:Le.rootHeight,show:I||ne,width:Le.rootWidth}),Be]}),e(O,{activeZoom:$,containerHeight:S,containerWidth:D,endReached:ee,hide:Y||ne,isDark:ce,isFullScreen:q,isScrolled:Y,onAction:e=>{"FULL_SCREEN"===e?E():"1X"===e||"2X"===e||"3X"===e?P(e):"GO_UP"===e?K():"GO_DOWN"===e?Q():"TOGGLE_THEME"===e&&ie()},ref:h,rootHeight:Le.rootHeight,rootWidth:Le.rootWidth,scrollPercent:V,scrollPositions:Z,startReached:te}),he?e(le,{activeImageIndex:we,dimensions:{height:Le.rootHeight,width:Le.rootWidth},left:Z.scrollLeft,node:de.current,onClose:()=>{me(!1),ue("")},onNext:Me,onPrevious:Te,rect:pe,show:ge,top:Z.scrollTop,totalImages:u.length,url:he}):null]})})})};var ae={unveil:"effects-module_unveil__W00v5",veil_horizontal:"effects-module_veil_horizontal__2SxOg",veil_vertical:"effects-module_veil_vertical__0H4M0"};var de="masonry-module_container__L1nYg",he="masonry-module_no_gutter__GyeQG";const ue=({children:t,height:o=800,width:n=1200,fillMode:i,gutter:s=4,enableAnimation:a=!0})=>{const h=l(null);!function({target:e,fillMode:t="HORIZONTAL",gutter:o=2,enableAnimation:r=!0,animationDelay:n=200}){c((()=>{if(e&&e.current){const i=e.current,{clientWidth:l,clientHeight:s}=i,c=Array.from(i.children),a=l,d=s;let h=0,u=0,g=0,m=0,p=0,v=0;c.forEach((e=>{const i=Array.from(e.classList).filter((e=>e.includes("rc-"))),l=e.firstChild,s=ae[`veil_${t.toLowerCase()}`];if(r&&(l.classList.add(s),l.addEventListener("load",(()=>{setTimeout((()=>{l.classList.remove(s),l.classList.add(ae.unveil)}),n)}))),i){const[r,n]=[i.find((e=>e.includes("-w"))),i.find((e=>e.includes("-h")))].map((e=>Number(null==e?void 0:e.replace(/(rc-w-|rc-h-)/,"")))),l=r-o,s=n-o;if(!l||!s)return;let c="";"HORIZONTAL"===t?(h+l<=a?(c=`;left: ${g}px; top: ${m}px;`,h+=l+o,g=h+o):(m+=p+o,c=`;left: 0px; top: ${m}px;`,g=l+o,h=l,p=0),p=Math.max(p,s)):"VERTICAL"===t&&(u+s<=d?(c=`;top: ${m}px; left: ${g}px;`,u+=s+o,m=u+o):(g+=v+o,c=`;left: ${g}px; top: 0px;`,m=s+o,u=s,v=0),v=Math.max(v,l)),c+=`\n            width: ${l}px;\n            height: ${s}px;\n            visibility: visible;\n          `,e.style.cssText=c,c=""}}))}}),[null==e?void 0:e.current])}({enableAnimation:a,fillMode:i,gutter:s,target:h});const u=d((()=>({height:`${o}px`,width:`${n}px`})),[o,n]),g=r(de,s?"":he,[]);return e("div",{className:g,ref:h,style:u,children:t})};export{ce as Grid,ue as Masonry};
